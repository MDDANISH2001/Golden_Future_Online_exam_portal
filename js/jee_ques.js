const questions = [
    {
        question: "A bob of mass m attached to an inextensible string of length l is suspended from a vertical support. The bob rotates in a horizontal circle with an angular speed ω rad/s about the vertical support. About the point of suspension,",
        optionA: "angular momentum is conserved",
        optionB: "angular momentum changes in magnitude but not in direction",
        optionC: "angular momentum changes in direction but not in magnitude",
        optionD: "angular momentum changes both in momentum and direction",
        correctOption: "optionC"
    },

    {
        question: "The current voltage relation of diode is given by I = (e1000V/T - 1) mA, where the applied V is in volts and the temperature T is in degree Kelvin. If a student makes an error measuring ±0.01 V while measuring the current of 5 mA at 300K, what will be the error in the value of current in mA ?",
        optionA: "0.2mA",
        optionB: "0.02mA",
        optionC: "0.5mA",
        optionD: "0.05mA",
        correctOption: "optionA"
    },

    {
        question: "Mercury boils at 367°C. However, mercury thermometers are made such that they can measure temperature upto 500°C. This is done by",
        optionA: "maintaining vaccume above mercury column in the steam of the thermometer",
        optionB: "filling nitrogen gas at high pressure above the mercury column",
        optionC: "filling oxygen gas at high pressure above the mercury column",
        optionD: "filling nitrogen gas at low pressure above the mercury column",
        correctOption: "optionB"
    },

    {
        question: "A force is inclined at angle 60° to the horizontal. If its rectangular component in the horizontal direction is 50 N, then magnitude of the force in the vertical direction is",
        optionA: "25 N",
        optionB: "75 N",
        optionC: "87 N",
        optionD: "100N",
        correctOption: "optionC"
    },

    {
        question: "The excess pressure inside one soap bubble is three times that inside a second soap bubble, then the ratio of their surface areas is",
        optionA: "1 : 9",
        optionB: "1 : 3",
        optionC: "1 : 27",
        optionD: "9 : 1",
        correctOption: "optionA"
    },

    {
        question: "The electrostatic force of repulsion between two positively charged ions carrying equal charge is 3.7 × 10-9 N, when they are separated by a distance of 5 Å. How much electrons are missing from each ion?",
        optionA: "10",
        optionB: "8",
        optionC: "2",
        optionD: "1",
        correctOption: "optionC"
    },

    {
        question: "An object is placed at 20 cm in front of a concave mirror produces three times magnified real image. What is the focal length of the concave mirror?",
        optionA: "15 cm",
        optionB: "6.6 cm",
        optionC: "10 cm",
        optionD: "7.5cm",
        correctOption: "optionA"
    },

    {
        question: "When a solid with a band gap has a donor level just below its empty energy band, the solid is",
        optionA: "an insulator",
        optionB: "a conductor",
        optionC: "p-type semiconductor",
        optionD: "n-type semiconductor",
        correctOption: "optionD"
    },

    {
        question: "The value of Planck's constant is 6.63 x 10-34 Js. The speed of light is 3 x 1017 nm s-1. Which value is closest to the wavelength in nanometer of a quantum of light with frequency of 6 x 1015 s-1?",
        optionA: "25",
        optionB: "50",
        optionC: "75",
        optionD: "10",
        correctOption: "optionB"
    },

    {
        question: "A gas undergoes a thermodynamical process but the volume of the gas does not change. What is the nature of this process ?",
        optionA: "Isothermal",
        optionB: "Adiabatic",
        optionC: "Isobaric",
        optionD: "Isochoric",
        correctOption: "optionD"
    },

    {
        question: "Equal moles of hydrogen and oxygen gases are placed in a container with a pin-hole through which both can escape. What fraction of the oxygen escapes in the time required for one-half of the hydrogen to escape ?",
        optionA: "1/8",
        optionB: "1/4",
        optionC: "3/8",
        optionD: "1/2",
        correctOption: "optionA"
    },

    {
        question: "20.0 g of a magnesium carbonate sample decomposes on heating to give carbon dioxide and 8.0 g magnesium oxide. What will be the percentage purity of magnesium carbonate in the sample ?",
        optionA: "75",
        optionB: "96",
        optionC: "60",
        optionD: "84",
        correctOption: "optionD"
    },


    {
        question: "Hydrogen peroxide in its reaction with KIO4 and NH2 OH respectively, is acting as a",
        optionA: "reducing agent, oxidising agent",
        optionB: "reducing agent, reducing agent",
        optionC: "oxidising agent, oxidising agent",
        optionD: "oxidising agent, resducing agent",
        correctOption: "optionA"
    },

    {
        question: "Reduction of nitrobenzene in the presence of Zn /NH4 Cl gives",
        optionA: "azobenzene",
        optionB: "hydrazobenzene",
        optionC: "N-phenyl hydroxylamine",
        optionD: "aniline",
        correctOption: "optionC"
    },

    {
        question: "In borax bead test, the coloured ions give characteristic coloured beads due to the formation of",
        optionA: "metal borates",
        optionB: "metal metaborates",
        optionC: "metal phosphates",
        optionD: "metal tetraborates",
        correctOption: "optionB"
    },

    {
        question: "An atom has electronic configuration 1s2 2s2 2p6 3s2 3p6 3d3 4s2, you will place it in which group?",
        optionA: "fifth",
        optionB: "fifteenth",
        optionC: "second",
        optionD: "third",
        correctOption: "optionA"
    },

    {
        question: "Let x1 , x2,... xn be in an AP. x1 + x4 + x9 + x11 + x20 + x22 + x27 + x30 = 272 then x1 + x3 + ...+x30 is equal to",
        optionA: "1020",
        optionB: "1200",
        optionC: "2720",
        optionD: "2072",
        correctOption: "optionA"
    },

    {
        question: "Given positive integers r > 1, n >2 and that the coefficient of (3r)th and (r + 2)th terms in the binomial expansion of (1+ x)^2n are equal . Then",
        optionA: "n = 2r",
        optionB: "n = 2r + 1",
        optionC: "n = 3r",
        optionD: "none of these",
        correctOption: "optionA"
    },

    {
        question: "The number of positive integers which can be formed by using any number of digits from 0, 1, 2, 3, 4, 5 but using each digit not more than once in each number, is",
        optionA: "1200",
        optionB: "1500",
        optionC: "1600",
        optionD: "1630",
        correctOption: "optionD"
    },

    {
        question: "A ladder rests against a wall so that its top touches the roof of the house. If the ladder makes an angle of 60° with the horizontal and height of the house is 6√3 in, then the length of the ladder is",
        optionA: "12√3 m",
        optionB: "12 m",
        optionC: "12/√3 m",
        optionD: "None of these",
        correctOption: "optionB"
    },

    {
        question: "The differential equation of the family of parabolas with vertex at (0, -1) and having axis along Y - axis is",
        optionA: "yy' + 2xy + 1 = 0",
        optionB: "xy' + y + 1 = 0",
        optionC: "xy' - 2y - 2 = 0",
        optionD: "xy' - y - 1 = 0",
        correctOption: "optionC"
    },

    {
        question: "If a, b and c are non - coplanar vectors and if d is such that d = 1/x (a + b + c) and d = 1/y (b + c + d), where x and y are non - zero real numbers, then 1/xy (a + b + c + d) equals",
        optionA: "3c",
        optionB: "-a",
        optionC: "0",
        optionD: "2a",
        correctOption: "optionC"
    },

    {
        question: "The points (2, 5) and (5, 1) are two opposite vertices of a rectangle. If other two vertices are points on the straight line y = 2x + k, then the value of k is",
        optionA: "4",
        optionB: "3",
        optionC: "-4",
        optionD: "-3",
        correctOption: "optionC"
    },

    {
        question: "The area bounded by y = x|sin x| and X - axis between x = 0, x = 2π is",
        optionA: "2π sq units",
        optionB: "3π sq units",
        optionC: "π sq units",
        optionD: "4π sq units",
        correctOption: "optionD"
    },

]


let shuffledQuestions = [] //empty array to hold shuffled selected questions out of all available questions

function handleQuestions() { 
    //function to shuffle and push 10 questions to shuffledQuestions array
//app would be dealing with 10questions per session
    while (shuffledQuestions.length <= 11) {
        const random = questions[Math.floor(Math.random() * questions.length)]
        if (!shuffledQuestions.includes(random)) {
            shuffledQuestions.push(random)
        }
    }
}


let questionNumber = 1 //holds the current question number
let playerScore = 0  //holds the player score
let wrongAttempt = 0 //amount of wrong answers picked by player
let indexNumber = 0 //will be used in displaying next question

// function for displaying next question in the array to dom
//also handles displaying players and quiz information to dom
function NextQuestion(index) {
    handleQuestions()
    const currentQuestion = shuffledQuestions[index]
    document.getElementById("question-number").innerHTML = questionNumber
    document.getElementById("player-score").innerHTML = playerScore
    document.getElementById("display-question").innerHTML = currentQuestion.question;
    document.getElementById("option-one-label").innerHTML = currentQuestion.optionA;
    document.getElementById("option-two-label").innerHTML = currentQuestion.optionB;
    document.getElementById("option-three-label").innerHTML = currentQuestion.optionC;
    document.getElementById("option-four-label").innerHTML = currentQuestion.optionD;

}


function checkForAnswer() {
    const currentQuestion = shuffledQuestions[indexNumber] //gets current Question 
    const currentQuestionAnswer = currentQuestion.correctOption //gets current Question's answer
    const options = document.getElementsByName("option"); //gets all elements in dom with name of 'option' (in this the radio inputs)
    let correctOption = null

    options.forEach((option) => {
        if (option.value === currentQuestionAnswer) {
            //get's correct's radio input with correct answer
            correctOption = option.labels[0].id
        }
    })

    //checking to make sure a radio input has been checked or an option being chosen
    if (options[0].checked === false && options[1].checked === false && options[2].checked === false && options[3].checked == false) {
        document.getElementById('option-modal').style.display = "flex"
    }

    //checking if checked radio button is same as answer
    options.forEach((option) => {
        if (option.checked === true && option.value === currentQuestionAnswer) {
            document.getElementById(correctOption).style.backgroundColor = "green"
            playerScore++ //adding to player's score
            indexNumber++ //adding 1 to index so has to display next question..
            //set to delay question number till when next question loads
            setTimeout(() => {
                questionNumber++
            }, 1000)
        }

        else if (option.checked && option.value !== currentQuestionAnswer) {
            const wrongLabelId = option.labels[0].id
            document.getElementById(wrongLabelId).style.backgroundColor = "red"
            document.getElementById(correctOption).style.backgroundColor = "green"
            wrongAttempt++ //adds 1 to wrong attempts 
            indexNumber++
            //set to delay question number till when next question loads
            setTimeout(() => {
                questionNumber++
            }, 1000)
        }
    })
}



//called when the next button is called
function handleNextQuestion() {
    checkForAnswer() //check if player picked right or wrong option
    unCheckRadioButtons()
    //delays next question displaying for a second just for some effects so questions don't rush in on player
    setTimeout(() => {
        if (indexNumber <= 11) {
//displays next question as long as index number isn't greater than 9, remember index number starts from 0, so index 9 is question 10
            NextQuestion(indexNumber)
        }
        else {
            handleEndGame()//ends game if index number greater than 9 meaning we're already at the 10th question
        }
        resetOptionBackground()
    }, 1000);
}

//sets options background back to null after display the right/wrong colors
function resetOptionBackground() {
    const options = document.getElementsByName("option");
    options.forEach((option) => {
        document.getElementById(option.labels[0].id).style.backgroundColor = ""
    })
}

// unchecking all radio buttons for next question(can be done with map or foreach loop also)
function unCheckRadioButtons() {
    const options = document.getElementsByName("option");
    for (let i = 0; i < options.length; i++) {
        options[i].checked = false;
    }
}

// function for when all questions being answered
function handleEndGame() {
    let remark = null
    let remarkColor = null

    // condition check for player remark and remark color
    if (playerScore <= 4) {
        remark = "Bad Grades, Keep Practicing."
        remarkColor = "red"
    }
    else if (playerScore >= 5 && playerScore < 9) {
        remark = "Average Grades, You can do better."
        remarkColor = "orange"
    }
    else if (playerScore >= 10) {
        remark = "Excellent, Keep the good work going."
        remarkColor = "green"
    }
    const playerGrade = (playerScore / 12) * 100

    //data to display to score board
    document.getElementById('remarks').innerHTML = remark
    document.getElementById('remarks').style.color = remarkColor
    document.getElementById('grade-percentage').innerHTML = playerGrade
    document.getElementById('wrong-answers').innerHTML = wrongAttempt
    document.getElementById('right-answers').innerHTML = playerScore
    document.getElementById('score-modal').style.display = "flex"
    
    
}

//closes score modal, resets game and reshuffles questions
function closeScoreModal() {
    window.alert("Thanks for choosing Golden Future. Take time to explore more features!")
    window.location.replace("index.html")
}

//function to close warning modal
function closeOptionModal() {
    document.getElementById('option-modal').style.display = "none"
}

function confirmUser(){
    f1=window.confirm("Are your sure you want to Cancel Quiz?")
    if (f1){
        window.location.replace("index.html")
    }
}